<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="kr.or.iei.board.model.dao.BoardDao">
	
	<!-- 전체 게시글 수 조회 -->
	<select id="selectBoardCount" resultType="_int">
	select count(*)
	  from tbl_board
	</select>
	
	<!-- 전체 게시글 목록 조회 -->
	<select id="selectBoardList" parameterType="PageInfo" resultType="Board">
	select board_no as boardNo,
		   board_title as boardTitle,
		   board_thumb as boardThumbPath,
		   board_writer as boardWriter,
		   board_date as boardDate
      from (
      	   select rownum rnum, a.*
      	     from (
      	     	  select board_no,
      	     	  		 board_title,
      	     	  		 board_thumb,
      	     	  		 board_writer,
      	     	  		 board_date
      	     	  	from tbl_board
      	     	   order by board_date desc	      	     	  
      	     	  )a
      	   )a
      where rnum between #{start} and #{end}	   
		   
	</select>
	
	<!-- 게시글 번호 조회 -->
	<select id="selectBoardNo" resultType="_int">
	select seq_board.nextval from dual
	</select>
	
	<!-- 게시글 정보 등록 -->
	<insert id="insertBoard" parameterType="Board">
	insert into tbl_board
		values
		(
		#{boardNo},
		#{boardTitle},
		#{boardThumbPath},
		#{boardContent},
		#{boardWriter},
		1,
		sysdate
		)
	</insert>
	
	<!-- 게시글 파일 정보 등록 -->
	<insert id="insertBoardFile" parameterType="BoardFile">
	insert into tbl_board_file
		values
		(
		seq_board_file.nextval,
		#{boardNo},
		#{fileName},
		#{filePath}
		)
	</insert>

</mapper>
